import{c as d,u as x,r as o,s as n,j as e}from"./index-zyKdYlih.js";const f=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],v=d("shield",f);const j=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],b=d("trash-2",j);const w=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],k=d("user-plus",w),z=()=>{const{user:E}=x(),[c,y]=o.useState([]),[t,m]=o.useState(""),[h,p]=o.useState(!0),[a,i]=o.useState("");o.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:r,error:s}=await n.from("employees").select("*").order("created_at",{ascending:!1});if(s)throw s;y(r||[])}catch(r){console.error("Error fetching employees:",r.message)}finally{p(!1)}},u=async r=>{if(r.preventDefault(),i(""),!!t)try{const{error:s}=await n.from("employees").insert([{email:t,role:"editor"}]);if(s)throw s;i("Employee added successfully!"),m(""),l()}catch(s){i("Error adding employee: "+s.message)}},g=async r=>{if(window.confirm("Are you sure you want to remove this employee?"))try{const{error:s}=await n.from("employees").delete().eq("id",r);if(s)throw s;l()}catch(s){console.error("Error removing employee:",s.message)}};return e.jsxs("div",{className:"container",style:{padding:"4rem 1.5rem",minHeight:"60vh"},children:[e.jsxs("div",{style:{marginBottom:"3rem",borderBottom:"1px solid #eee",paddingBottom:"1rem"},children:[e.jsxs("h1",{style:{color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(v,{size:32}),"Admin Control Panel"]}),e.jsx("p",{style:{color:"var(--color-text-light)"},children:"Manage access permissions for your team."})]}),e.jsxs("div",{className:"course-grid",children:[e.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)"},children:[e.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(k,{size:20}),"Add New Employee"]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Gmail Address"}),e.jsx("input",{type:"email",value:t,onChange:r=>m(r.target.value),placeholder:"employee@gmail.com",style:{width:"100%",padding:"0.8rem",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",fontSize:"1rem"},required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Grant Access"}),a&&e.jsx("p",{style:{marginTop:"1rem",color:a.includes("Error")?"red":"green",fontSize:"0.9rem"},children:a})]})]}),e.jsxs("div",{style:{gridColumn:"span 2",background:"white",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)"},children:[e.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Authorized Employees"}),h?e.jsx("p",{children:"Loading..."}):c.length===0?e.jsx("p",{style:{color:"#888",fontStyle:"italic"},children:"No employees added yet."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.map(r=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"var(--color-surface)",borderRadius:"var(--radius-md)"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:"600"},children:r.email}),e.jsx("span",{style:{fontSize:"0.8rem",background:"#e0e7ff",color:"#3730a3",padding:"0.2rem 0.6rem",borderRadius:"1rem",textTransform:"capitalize"},children:r.role})]}),e.jsx("button",{onClick:()=>g(r.id),className:"btn",style:{color:"#ef4444",padding:"0.5rem"},title:"Remove Access",children:e.jsx(b,{size:20})})]},r.id))})]})]})]})};export{z as default};
